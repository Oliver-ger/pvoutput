
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.9">
    
    
      
        <title>API Documentation - PVOutput</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2b4465f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pvoutput" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PVOutput" class="md-header__button md-logo" aria-label="PVOutput" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PVOutput
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PVOutput" class="md-nav__button md-logo" aria-label="PVOutput" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    PVOutput
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API Documentation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pvoutput" class="md-nav__link">
    pvoutput
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.PVOutput" class="md-nav__link">
    PVOutput
  </a>
  
    <nav class="md-nav" aria-label="PVOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.addoutput" class="md-nav__link">
    addoutput()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.addstatus" class="md-nav__link">
    addstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.check_rate_limit" class="md-nav__link">
    check_rate_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.delete_status" class="md-nav__link">
    delete_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.deregister_notification" class="md-nav__link">
    deregister_notification()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.getstatus" class="md-nav__link">
    getstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.register_notification" class="md-nav__link">
    register_notification()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.asyncio" class="md-nav__link">
    asyncio
  </a>
  
    <nav class="md-nav" aria-label="asyncio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput" class="md-nav__link">
    PVOutput
  </a>
  
    <nav class="md-nav" aria-label="PVOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.addoutput" class="md-nav__link">
    addoutput()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.addstatus" class="md-nav__link">
    addstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.check_rate_limit" class="md-nav__link">
    check_rate_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.delete_status" class="md-nav__link">
    delete_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.deregister_notification" class="md-nav__link">
    deregister_notification()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.getstatus" class="md-nav__link">
    getstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.register_notification" class="md-nav__link">
    register_notification()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.base" class="md-nav__link">
    base
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase" class="md-nav__link">
    PVOutputBase
  </a>
  
    <nav class="md-nav" aria-label="PVOutputBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase.get_time_by_base" class="md-nav__link">
    get_time_by_base()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase.validate_data" class="md-nav__link">
    validate_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.round_to_base" class="md-nav__link">
    round_to_base()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.exceptions" class="md-nav__link">
    exceptions
  </a>
  
    <nav class="md-nav" aria-label="exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.DonationRequired" class="md-nav__link">
    DonationRequired
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.InvalidRegexpError" class="md-nav__link">
    InvalidRegexpError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.UnknownAlertTypeError" class="md-nav__link">
    UnknownAlertTypeError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.UnknownMethodError" class="md-nav__link">
    UnknownMethodError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.parameters" class="md-nav__link">
    parameters
  </a>
  
    <nav class="md-nav" aria-label="parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.parameters.ADDSTATUS_PARAMETERS" class="md-nav__link">
    ADDSTATUS_PARAMETERS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.get_rate_limit_header" class="md-nav__link">
    get_rate_limit_header()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.responsedata_to_response" class="md-nav__link">
    responsedata_to_response()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.validate_delete_status_date" class="md-nav__link">
    validate_delete_status_date()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pvoutput" class="md-nav__link">
    pvoutput
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.PVOutput" class="md-nav__link">
    PVOutput
  </a>
  
    <nav class="md-nav" aria-label="PVOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.addoutput" class="md-nav__link">
    addoutput()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.addstatus" class="md-nav__link">
    addstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.check_rate_limit" class="md-nav__link">
    check_rate_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.delete_status" class="md-nav__link">
    delete_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.deregister_notification" class="md-nav__link">
    deregister_notification()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.getstatus" class="md-nav__link">
    getstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.PVOutput.register_notification" class="md-nav__link">
    register_notification()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.asyncio" class="md-nav__link">
    asyncio
  </a>
  
    <nav class="md-nav" aria-label="asyncio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput" class="md-nav__link">
    PVOutput
  </a>
  
    <nav class="md-nav" aria-label="PVOutput">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.addoutput" class="md-nav__link">
    addoutput()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.addstatus" class="md-nav__link">
    addstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.check_rate_limit" class="md-nav__link">
    check_rate_limit()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.delete_status" class="md-nav__link">
    delete_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.deregister_notification" class="md-nav__link">
    deregister_notification()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.getstatus" class="md-nav__link">
    getstatus()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.asyncio.PVOutput.register_notification" class="md-nav__link">
    register_notification()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.base" class="md-nav__link">
    base
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase" class="md-nav__link">
    PVOutputBase
  </a>
  
    <nav class="md-nav" aria-label="PVOutputBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase.get_time_by_base" class="md-nav__link">
    get_time_by_base()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.PVOutputBase.validate_data" class="md-nav__link">
    validate_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.base.round_to_base" class="md-nav__link">
    round_to_base()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.exceptions" class="md-nav__link">
    exceptions
  </a>
  
    <nav class="md-nav" aria-label="exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.DonationRequired" class="md-nav__link">
    DonationRequired
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.InvalidRegexpError" class="md-nav__link">
    InvalidRegexpError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.UnknownAlertTypeError" class="md-nav__link">
    UnknownAlertTypeError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.exceptions.UnknownMethodError" class="md-nav__link">
    UnknownMethodError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.parameters" class="md-nav__link">
    parameters
  </a>
  
    <nav class="md-nav" aria-label="parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.parameters.ADDSTATUS_PARAMETERS" class="md-nav__link">
    ADDSTATUS_PARAMETERS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pvoutput.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.get_rate_limit_header" class="md-nav__link">
    get_rate_limit_header()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.responsedata_to_response" class="md-nav__link">
    responsedata_to_response()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvoutput.utils.validate_delete_status_date" class="md-nav__link">
    validate_delete_status_date()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>API Documentation</h1>

<div class="doc doc-object doc-module">

<a id="pvoutput"></a>
    <div class="doc doc-contents first">

      <p>Interface to the PVOutput API </p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h2 id="pvoutput.PVOutput" class="doc doc-heading">
        <code>
PVOutput            (<a title="pvoutput.base.PVOutputBase" href="#pvoutput.base.PVOutputBase">PVOutputBase</a>)
        </code>



</h2>

    <div class="doc doc-contents ">

      <p>This class provides an interface to the pvoutput.org API</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PVOutput</span><span class="p">(</span><span class="n">PVOutputBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class provides an interface to the pvoutput.org API&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Makes a call to a URL endpoint with the data/headers/method you require.</span>

<span class="sd">        :param endpoint: The URL to call</span>
<span class="sd">        :type endpoint: str</span>

<span class="sd">        :param data: Data to send</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :param headers: Additional headers, if unset it&#39;ll use self._headers() which is the standard API key / systemid set (eg, self.check_rate_limit)</span>
<span class="sd">        :type headers: dict</span>

<span class="sd">        :param method: specify a method if you want to use something other than POST</span>
<span class="sd">        :type method: str</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: requests.Response</span>

<span class="sd">        :raises TypeError: if the data you pass is of the wrong format.</span>
<span class="sd">        :raises ValueError: if the call throws a HTTP 400 error.</span>
<span class="sd">        :raises requests.exception: if method throws an exception.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">CALL_PARAMETERS</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;endpoint&quot;</span><span class="p">],</span>
                <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">),</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()),</span>
                <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;endpoint&quot;</span><span class="p">],</span>
                <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">),</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;headers&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnknownMethodError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unknown method </span><span class="si">{</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
            <span class="c1"># TODO: work out how to get the specific response and provide useful answers</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HTTP400: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># likely errors - https://pvoutput.org/help/api_specification.html#error-messages</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Makes a call to the site, checking if you have hit the rate limit.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#rate-limits</span>

<span class="sd">        :returns: the headers relating to the rate limit.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Rate-Limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getsystem&quot;</span><span class="p">]</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_rate_limit_header</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">def</span> <span class="nf">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Add Status service accepts live output data</span>
<span class="sd">        at the Status Interval (5 to 15 minutes) configured for the system.</span>

<span class="sd">        API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</span>

<span class="sd">        :param data: The status data</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: requests.Response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if you don&#39;t set a time, set it to now</span>
        <span class="c1"># can&#39;t push this through the validator as it relies on the class config</span>
        <span class="k">if</span> <span class="s2">&quot;t&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_by_base</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDSTATUS_PARAMETERS</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addstatus&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Add Output service uploads end of day output information.</span>
<span class="sd">        It allows all of the information provided on the Add Output page to be uploaded.</span>

<span class="sd">        API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</span>

<span class="sd">        :param data: The output data to upload</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: requests.Response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDOUTPUT_PARAMETERS</span><span class="p">)</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addoutput&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_status</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">time_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a given status, based on the provided parameters</span>
<span class="sd">        needs a datetime() object</span>
<span class="sd">        set the hours/minutes to non-zero to delete a specific time</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</span>

<span class="sd">        :param date_val: The date to delete.</span>
<span class="sd">        :type date_val: datetime.datetime.date</span>

<span class="sd">        :param time_val: The time entry to delete.</span>
<span class="sd">        :type time_val: datetime.datetime.time</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: requests.Response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;date_val&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="p">,</span>
                <span class="s2">&quot;time_val&quot;</span><span class="p">:</span> <span class="n">time_val</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">DELETESTATUS_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)}</span>
        <span class="k">if</span> <span class="n">time_val</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deletestatus&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="c1"># pylint: disable=too-many-locals</span>
    <span class="k">def</span> <span class="nf">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Get Status service retrieves system status information and live output data.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#get-status-service</span>

<span class="sd">        :returns: the last updated data</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: extend this, you can do history searches and all sorts with this endpoint</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;ext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;sid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemid</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getstatus&quot;</span><span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="c1"># grab all the things</span>
        <span class="n">responsedata</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">responsedata_to_response</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>

        <span class="c1"># if we&#39;re fancy, we get more data</span>
        <span class="k">if</span> <span class="n">extras</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
                <span class="n">responsedata</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="kc">None</span> <span class="k">if</span> <span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">responsedata</span>

    <span class="k">def</span> <span class="nf">register_notification</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Register Notification Service allows a third party application</span>
<span class="sd">        to receive PVOutput alert callbacks via a HTTP end point.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</span>

<span class="sd">        All parameters are mandatory</span>

<span class="sd">        :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">        :type appid: str (maxlen: 100)</span>

<span class="sd">        :param url: Callback URL (eg: http://example.com/api/)</span>
<span class="sd">        :type url: str (maxlen: 150)</span>

<span class="sd">        :param alerttype: Alert Type (See list below)</span>
<span class="sd">        :type alerttype: int</span>

<span class="sd">        :return: The response object</span>
<span class="sd">        :rtype: requests.Response</span>

<span class="sd">        Alert Type list:</span>

<span class="sd">        =====   ====</span>
<span class="sd">        Value   Type</span>
<span class="sd">        =====   ====</span>
<span class="sd">        0       All Notifications</span>
<span class="sd">        1       Private Message</span>
<span class="sd">        3       Joined Team</span>
<span class="sd">        4       Added Favourite</span>
<span class="sd">        5       High Consumption Alert</span>
<span class="sd">        6       System Idle Alert</span>
<span class="sd">        8       Low Generation Alert</span>
<span class="sd">        11      Performance Alert</span>
<span class="sd">        14      Standby Cost Alert</span>
<span class="sd">        15      Extended Data V7 Alert</span>
<span class="sd">        16      Extended Data V8 Alert</span>
<span class="sd">        17      Extended Data V9 Alert</span>
<span class="sd">        18      Extended Data V10 Alert</span>
<span class="sd">        19      Extended Data V11 Alert</span>
<span class="sd">        20      Extended Data V12 Alert</span>
<span class="sd">        23      High Net Power Alert</span>
<span class="sd">        24      Low Net Power Alert</span>
<span class="sd">        =====   ====</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">REGISTER_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">call_url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;registernotification&quot;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">call_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">deregister_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Deregister Notification Service removes registered notifications under an application id for a system.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</span>

<span class="sd">        All parameters are mandatory</span>

<span class="sd">        :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">        :type appid: str (maxlen: 100)</span>

<span class="sd">        :param alerttype: Alert Type (See list below)</span>
<span class="sd">        :type alerttype: int</span>

<span class="sd">        :return: The response object</span>
<span class="sd">        :rtype: requests.Response</span>

<span class="sd">        Alert Type list:</span>

<span class="sd">        =====   ====</span>
<span class="sd">        Value   Type</span>
<span class="sd">        =====   ====</span>
<span class="sd">        0       All Notifications</span>
<span class="sd">        1       Private Message</span>
<span class="sd">        3       Joined Team</span>
<span class="sd">        4       Added Favourite</span>
<span class="sd">        5       High Consumption Alert</span>
<span class="sd">        6       System Idle Alert</span>
<span class="sd">        8       Low Generation Alert</span>
<span class="sd">        11      Performance Alert</span>
<span class="sd">        14      Standby Cost Alert</span>
<span class="sd">        15      Extended Data V7 Alert</span>
<span class="sd">        16      Extended Data V8 Alert</span>
<span class="sd">        17      Extended Data V9 Alert</span>
<span class="sd">        18      Extended Data V10 Alert</span>
<span class="sd">        19      Extended Data V11 Alert</span>
<span class="sd">        20      Extended Data V12 Alert</span>
<span class="sd">        23      High Net Power Alert</span>
<span class="sd">        24      Low Net Power Alert</span>
<span class="sd">        =====   ====</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
                <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">DELETE_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deregisternotification&quot;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.addoutput" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>The Add Output service uploads end of day output information.
It allows all of the information provided on the Add Output page to be uploaded.</p>
<p>API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</p>
<p>:param data: The output data to upload
:type data: dict</p>
<p>:returns: The response object
:rtype: requests.Response</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Add Output service uploads end of day output information.</span>
<span class="sd">    It allows all of the information provided on the Add Output page to be uploaded.</span>

<span class="sd">    API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</span>

<span class="sd">    :param data: The output data to upload</span>
<span class="sd">    :type data: dict</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: requests.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDOUTPUT_PARAMETERS</span><span class="p">)</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addoutput&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.addstatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>The Add Status service accepts live output data
at the Status Interval (5 to 15 minutes) configured for the system.</p>
<p>API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</p>
<p>:param data: The status data
:type data: dict</p>
<p>:returns: The response object
:rtype: requests.Response</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Add Status service accepts live output data</span>
<span class="sd">    at the Status Interval (5 to 15 minutes) configured for the system.</span>

<span class="sd">    API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</span>

<span class="sd">    :param data: The status data</span>
<span class="sd">    :type data: dict</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: requests.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if you don&#39;t set a time, set it to now</span>
    <span class="c1"># can&#39;t push this through the validator as it relies on the class config</span>
    <span class="k">if</span> <span class="s2">&quot;t&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_by_base</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDSTATUS_PARAMETERS</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addstatus&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.check_rate_limit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Makes a call to the site, checking if you have hit the rate limit.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#rate-limits</p>
<p>:returns: the headers relating to the rate limit.
:rtype: dict</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Makes a call to the site, checking if you have hit the rate limit.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#rate-limits</span>

<span class="sd">    :returns: the headers relating to the rate limit.</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()</span>
    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Rate-Limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getsystem&quot;</span><span class="p">]</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_rate_limit_header</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">retval</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.delete_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">,</span> <span class="n">time_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Deletes a given status, based on the provided parameters
needs a datetime() object
set the hours/minutes to non-zero to delete a specific time</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</p>
<p>:param date_val: The date to delete.
:type date_val: datetime.datetime.date</p>
<p>:param time_val: The time entry to delete.
:type time_val: datetime.datetime.time</p>
<p>:returns: The response object
:rtype: requests.Response</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delete_status</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">time_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a given status, based on the provided parameters</span>
<span class="sd">    needs a datetime() object</span>
<span class="sd">    set the hours/minutes to non-zero to delete a specific time</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</span>

<span class="sd">    :param date_val: The date to delete.</span>
<span class="sd">    :type date_val: datetime.datetime.date</span>

<span class="sd">    :param time_val: The time entry to delete.</span>
<span class="sd">    :type time_val: datetime.datetime.time</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: requests.Response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;date_val&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="p">,</span>
            <span class="s2">&quot;time_val&quot;</span><span class="p">:</span> <span class="n">time_val</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">DELETESTATUS_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">time_val</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deletestatus&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.deregister_notification" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deregister_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>The Deregister Notification Service removes registered notifications under an application id for a system.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</p>
<p>All parameters are mandatory</p>
<p>:param appid: Application ID (eg: example.app.id)
:type appid: str (maxlen: 100)</p>
<p>:param alerttype: Alert Type (See list below)
:type alerttype: int</p>
<p>:return: The response object
:rtype: requests.Response</p>
<p>Alert Type list:</p>
<p>=====   ====
Value   Type
=====   ====
0       All Notifications
1       Private Message
3       Joined Team
4       Added Favourite
5       High Consumption Alert
6       System Idle Alert
8       Low Generation Alert
11      Performance Alert
14      Standby Cost Alert
15      Extended Data V7 Alert
16      Extended Data V8 Alert
17      Extended Data V9 Alert
18      Extended Data V10 Alert
19      Extended Data V11 Alert
20      Extended Data V12 Alert
23      High Net Power Alert
24      Low Net Power Alert
=====   ====</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">deregister_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Deregister Notification Service removes registered notifications under an application id for a system.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</span>

<span class="sd">    All parameters are mandatory</span>

<span class="sd">    :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">    :type appid: str (maxlen: 100)</span>

<span class="sd">    :param alerttype: Alert Type (See list below)</span>
<span class="sd">    :type alerttype: int</span>

<span class="sd">    :return: The response object</span>
<span class="sd">    :rtype: requests.Response</span>

<span class="sd">    Alert Type list:</span>

<span class="sd">    =====   ====</span>
<span class="sd">    Value   Type</span>
<span class="sd">    =====   ====</span>
<span class="sd">    0       All Notifications</span>
<span class="sd">    1       Private Message</span>
<span class="sd">    3       Joined Team</span>
<span class="sd">    4       Added Favourite</span>
<span class="sd">    5       High Consumption Alert</span>
<span class="sd">    6       System Idle Alert</span>
<span class="sd">    8       Low Generation Alert</span>
<span class="sd">    11      Performance Alert</span>
<span class="sd">    14      Standby Cost Alert</span>
<span class="sd">    15      Extended Data V7 Alert</span>
<span class="sd">    16      Extended Data V8 Alert</span>
<span class="sd">    17      Extended Data V9 Alert</span>
<span class="sd">    18      Extended Data V10 Alert</span>
<span class="sd">    19      Extended Data V11 Alert</span>
<span class="sd">    20      Extended Data V12 Alert</span>
<span class="sd">    23      High Net Power Alert</span>
<span class="sd">    24      Low Net Power Alert</span>
<span class="sd">    =====   ====</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
            <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">DELETE_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deregisternotification&quot;</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.getstatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>The Get Status service retrieves system status information and live output data.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#get-status-service</p>
<p>:returns: the last updated data
:rtype: dict</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Get Status service retrieves system status information and live output data.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#get-status-service</span>

<span class="sd">    :returns: the last updated data</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: extend this, you can do history searches and all sorts with this endpoint</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;ext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;sid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemid</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getstatus&quot;</span><span class="p">]</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="c1"># grab all the things</span>
    <span class="n">responsedata</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">responsedata_to_response</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>

    <span class="c1"># if we&#39;re fancy, we get more data</span>
    <span class="k">if</span> <span class="n">extras</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="n">responsedata</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="kc">None</span> <span class="k">if</span> <span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">responsedata</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="pvoutput.PVOutput.register_notification" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>The Register Notification Service allows a third party application
to receive PVOutput alert callbacks via a HTTP end point.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</p>
<p>All parameters are mandatory</p>
<p>:param appid: Application ID (eg: example.app.id)
:type appid: str (maxlen: 100)</p>
<p>:param url: Callback URL (eg: http://example.com/api/)
:type url: str (maxlen: 150)</p>
<p>:param alerttype: Alert Type (See list below)
:type alerttype: int</p>
<p>:return: The response object
:rtype: requests.Response</p>
<p>Alert Type list:</p>
<p>=====   ====
Value   Type
=====   ====
0       All Notifications
1       Private Message
3       Joined Team
4       Added Favourite
5       High Consumption Alert
6       System Idle Alert
8       Low Generation Alert
11      Performance Alert
14      Standby Cost Alert
15      Extended Data V7 Alert
16      Extended Data V8 Alert
17      Extended Data V9 Alert
18      Extended Data V10 Alert
19      Extended Data V11 Alert
20      Extended Data V12 Alert
23      High Net Power Alert
24      Low Net Power Alert
=====   ====</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_notification</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Register Notification Service allows a third party application</span>
<span class="sd">    to receive PVOutput alert callbacks via a HTTP end point.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</span>

<span class="sd">    All parameters are mandatory</span>

<span class="sd">    :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">    :type appid: str (maxlen: 100)</span>

<span class="sd">    :param url: Callback URL (eg: http://example.com/api/)</span>
<span class="sd">    :type url: str (maxlen: 150)</span>

<span class="sd">    :param alerttype: Alert Type (See list below)</span>
<span class="sd">    :type alerttype: int</span>

<span class="sd">    :return: The response object</span>
<span class="sd">    :rtype: requests.Response</span>

<span class="sd">    Alert Type list:</span>

<span class="sd">    =====   ====</span>
<span class="sd">    Value   Type</span>
<span class="sd">    =====   ====</span>
<span class="sd">    0       All Notifications</span>
<span class="sd">    1       Private Message</span>
<span class="sd">    3       Joined Team</span>
<span class="sd">    4       Added Favourite</span>
<span class="sd">    5       High Consumption Alert</span>
<span class="sd">    6       System Idle Alert</span>
<span class="sd">    8       Low Generation Alert</span>
<span class="sd">    11      Performance Alert</span>
<span class="sd">    14      Standby Cost Alert</span>
<span class="sd">    15      Extended Data V7 Alert</span>
<span class="sd">    16      Extended Data V8 Alert</span>
<span class="sd">    17      Extended Data V9 Alert</span>
<span class="sd">    18      Extended Data V10 Alert</span>
<span class="sd">    19      Extended Data V11 Alert</span>
<span class="sd">    20      Extended Data V12 Alert</span>
<span class="sd">    23      High Net Power Alert</span>
<span class="sd">    24      Low Net Power Alert</span>
<span class="sd">    =====   ====</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">REGISTER_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">call_url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;registernotification&quot;</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">call_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h2 id="pvoutput.asyncio" class="doc doc-heading">
        <code>asyncio</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h2>

    <div class="doc doc-contents ">

      <p>AsyncIO interface to the PVOutput API </p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="pvoutput.asyncio.PVOutput" class="doc doc-heading">
        <code>
PVOutput            (<a title="pvoutput.base.PVOutputBase" href="#pvoutput.base.PVOutputBase">PVOutputBase</a>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>This class provides an interface to the pvoutput.org API</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PVOutput</span><span class="p">(</span><span class="n">PVOutputBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class provides an interface to the pvoutput.org API&quot;&quot;&quot;</span>

    <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">apikey</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">systemid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">donation_made</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">stats_period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup code</span>

<span class="sd">        :param apikey: API key (read or write)</span>
<span class="sd">        :type apikey: str</span>
<span class="sd">        :param systemid: system ID</span>
<span class="sd">        :type systemid: int</span>
<span class="sd">        :param donation_made: Whether to use the donation-required fields</span>
<span class="sd">        :type donation_made: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">apikey</span><span class="o">=</span><span class="n">apikey</span><span class="p">,</span>
            <span class="n">systemid</span><span class="o">=</span><span class="n">systemid</span><span class="p">,</span>
            <span class="n">donation_made</span><span class="o">=</span><span class="n">donation_made</span><span class="p">,</span>
            <span class="n">stats_period</span><span class="o">=</span><span class="n">stats_period</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">session</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Makes a call to a URL endpoint with the data/headers/method you require.</span>

<span class="sd">        :param endpoint: The URL to call</span>
<span class="sd">        :type endpoint: str</span>

<span class="sd">        :param data: Data to send</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :param headers: Additional headers, if unset it&#39;ll use self._headers() which is the standard API key / systemid set (eg, self.check_rate_limit)</span>
<span class="sd">        :type headers: dict</span>

<span class="sd">        :param method: specify a method if you want to use something other than POST</span>
<span class="sd">        :type method: str</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>

<span class="sd">        :raises TypeError: if the data you pass is of the wrong format.</span>
<span class="sd">        :raises ValueError: if the call throws a HTTP 400 error.</span>
<span class="sd">        :raises requests.exception: if method throws an exception.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">CALL_PARAMETERS</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;endpoint&quot;</span><span class="p">],</span>
                <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">),</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()),</span>
                <span class="n">params</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;method&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;endpoint&quot;</span><span class="p">],</span>
                <span class="n">data</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">),</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnknownMethodError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unknown method </span><span class="si">{</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;method&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
            <span class="c1"># TODO: work out how to get the specific response and provide useful answers</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HTTP400: </span><span class="si">{</span><span class="p">(</span><span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># likely errors - https://pvoutput.org/help/api_specification.html#error-messages</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Makes a call to the site, checking if you have hit the rate limit.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#rate-limits</span>

<span class="sd">        :returns: the headers relating to the rate limit.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Rate-Limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getsystem&quot;</span><span class="p">]</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span>
        <span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_rate_limit_header</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Add Status service accepts live output data</span>
<span class="sd">        at the Status Interval (5 to 15 minutes) configured for the system.</span>

<span class="sd">        API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</span>

<span class="sd">        :param data: The status data</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if you don&#39;t set a time, set it to now</span>
        <span class="c1"># can&#39;t push this through the validator as it relies on the class config</span>
        <span class="k">if</span> <span class="s2">&quot;t&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_by_base</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDSTATUS_PARAMETERS</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addstatus&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Add Output service uploads end of day output information.</span>
<span class="sd">        It allows all of the information provided on the Add Output page to be uploaded.</span>

<span class="sd">        API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</span>

<span class="sd">        :param data: The output data to upload</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDOUTPUT_PARAMETERS</span><span class="p">)</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addoutput&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_status</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">time_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deletes a given status, based on the provided parameters</span>
<span class="sd">        needs a datetime() object</span>
<span class="sd">        set the hours/minutes to non-zero to delete a specific time</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</span>

<span class="sd">        :param date_val: The date to delete.</span>
<span class="sd">        :type date_val: datetime.datetime.date</span>

<span class="sd">        :param time_val: The time entry to delete.</span>
<span class="sd">        :type time_val: datetime.datetime.time</span>

<span class="sd">        :returns: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;date_val&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="p">,</span>
                <span class="s2">&quot;time_val&quot;</span><span class="p">:</span> <span class="n">time_val</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">DELETESTATUS_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)}</span>
        <span class="k">if</span> <span class="n">time_val</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deletestatus&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Get Status service retrieves system status information and live output data.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#get-status-service</span>

<span class="sd">        :returns: the last updated data</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: extend this, you can do history searches and all sorts with this endpoint</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;ext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;sid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemid</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getstatus&quot;</span><span class="p">]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="c1"># grab all the things</span>
        <span class="n">text</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">responsedata</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">responsedata_to_response</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>

        <span class="c1"># if we&#39;re fancy, we get more data</span>
        <span class="k">if</span> <span class="n">extras</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
                <span class="n">responsedata</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="kc">None</span> <span class="k">if</span> <span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">responsedata</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">register_notification</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Register Notification Service allows a third party application</span>
<span class="sd">        to receive PVOutput alert callbacks via a HTTP end point.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</span>

<span class="sd">        All parameters are mandatory</span>

<span class="sd">        :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">        :type appid: str (maxlen: 100)</span>

<span class="sd">        :param url: Callback URL (eg: http://example.com/api/)</span>
<span class="sd">        :type url: str (maxlen: 150)</span>

<span class="sd">        :param alerttype: Alert Type (See list below)</span>
<span class="sd">        :type alerttype: int</span>

<span class="sd">        :return: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>

<span class="sd">        Alert Type list:</span>

<span class="sd">        =====   ====</span>
<span class="sd">        Value   Type</span>
<span class="sd">        =====   ====</span>
<span class="sd">        0       All Notifications</span>
<span class="sd">        1       Private Message</span>
<span class="sd">        3       Joined Team</span>
<span class="sd">        4       Added Favourite</span>
<span class="sd">        5       High Consumption Alert</span>
<span class="sd">        6       System Idle Alert</span>
<span class="sd">        8       Low Generation Alert</span>
<span class="sd">        11      Performance Alert</span>
<span class="sd">        14      Standby Cost Alert</span>
<span class="sd">        15      Extended Data V7 Alert</span>
<span class="sd">        16      Extended Data V8 Alert</span>
<span class="sd">        17      Extended Data V9 Alert</span>
<span class="sd">        18      Extended Data V10 Alert</span>
<span class="sd">        19      Extended Data V11 Alert</span>
<span class="sd">        20      Extended Data V12 Alert</span>
<span class="sd">        23      High Net Power Alert</span>
<span class="sd">        24      Low Net Power Alert</span>
<span class="sd">        =====   ====</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">REGISTER_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">call_url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;registernotification&quot;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">call_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">deregister_notification</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The Deregister Notification Service removes registered notifications under an application id for a system.</span>

<span class="sd">        API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</span>

<span class="sd">        All parameters are mandatory</span>

<span class="sd">        :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">        :type appid: str (maxlen: 100)</span>

<span class="sd">        :param alerttype: Alert Type (See list below)</span>
<span class="sd">        :type alerttype: int</span>

<span class="sd">        :return: The response object</span>
<span class="sd">        :rtype: aiohttp.ClientResponse</span>

<span class="sd">        Alert Type list:</span>

<span class="sd">        =====   ====</span>
<span class="sd">        Value   Type</span>
<span class="sd">        =====   ====</span>
<span class="sd">        0       All Notifications</span>
<span class="sd">        1       Private Message</span>
<span class="sd">        3       Joined Team</span>
<span class="sd">        4       Added Favourite</span>
<span class="sd">        5       High Consumption Alert</span>
<span class="sd">        6       System Idle Alert</span>
<span class="sd">        8       Low Generation Alert</span>
<span class="sd">        11      Performance Alert</span>
<span class="sd">        14      Standby Cost Alert</span>
<span class="sd">        15      Extended Data V7 Alert</span>
<span class="sd">        16      Extended Data V8 Alert</span>
<span class="sd">        17      Extended Data V9 Alert</span>
<span class="sd">        18      Extended Data V10 Alert</span>
<span class="sd">        19      Extended Data V11 Alert</span>
<span class="sd">        20      Extended Data V12 Alert</span>
<span class="sd">        23      High Net Power Alert</span>
<span class="sd">        24      Low Net Power Alert</span>
<span class="sd">        =====   ====</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
                <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">DELETE_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deregisternotification&quot;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">}</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">apikey</span><span class="p">,</span> <span class="n">systemid</span><span class="p">,</span> <span class="n">donation_made</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stats_period</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Setup code</p>
<p>:param apikey: API key (read or write)
:type apikey: str
:param systemid: system ID
:type systemid: int
:param donation_made: Whether to use the donation-required fields
:type donation_made: bool</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">apikey</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">systemid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">donation_made</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">stats_period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Setup code</span>

<span class="sd">    :param apikey: API key (read or write)</span>
<span class="sd">    :type apikey: str</span>
<span class="sd">    :param systemid: system ID</span>
<span class="sd">    :type systemid: int</span>
<span class="sd">    :param donation_made: Whether to use the donation-required fields</span>
<span class="sd">    :type donation_made: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">apikey</span><span class="o">=</span><span class="n">apikey</span><span class="p">,</span>
        <span class="n">systemid</span><span class="o">=</span><span class="n">systemid</span><span class="p">,</span>
        <span class="n">donation_made</span><span class="o">=</span><span class="n">donation_made</span><span class="p">,</span>
        <span class="n">stats_period</span><span class="o">=</span><span class="n">stats_period</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">session</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.addoutput" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>The Add Output service uploads end of day output information.
It allows all of the information provided on the Add Output page to be uploaded.</p>
<p>API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</p>
<p>:param data: The output data to upload
:type data: dict</p>
<p>:returns: The response object
:rtype: aiohttp.ClientResponse</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">addoutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Add Output service uploads end of day output information.</span>
<span class="sd">    It allows all of the information provided on the Add Output page to be uploaded.</span>

<span class="sd">    API Spec: https://pvoutput.org/help/api_specification.html#add-output-service</span>

<span class="sd">    :param data: The output data to upload</span>
<span class="sd">    :type data: dict</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: aiohttp.ClientResponse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDOUTPUT_PARAMETERS</span><span class="p">)</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addoutput&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.addstatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>The Add Status service accepts live output data
at the Status Interval (5 to 15 minutes) configured for the system.</p>
<p>API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</p>
<p>:param data: The status data
:type data: dict</p>
<p>:returns: The response object
:rtype: aiohttp.ClientResponse</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">addstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Add Status service accepts live output data</span>
<span class="sd">    at the Status Interval (5 to 15 minutes) configured for the system.</span>

<span class="sd">    API Spec: https://pvoutput.org/help/api_specification.html#add-status-service</span>

<span class="sd">    :param data: The status data</span>
<span class="sd">    :type data: dict</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: aiohttp.ClientResponse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if you don&#39;t set a time, set it to now</span>
    <span class="c1"># can&#39;t push this through the validator as it relies on the class config</span>
    <span class="k">if</span> <span class="s2">&quot;t&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_by_base</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ADDSTATUS_PARAMETERS</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;addstatus&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.check_rate_limit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Makes a call to the site, checking if you have hit the rate limit.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#rate-limits</p>
<p>:returns: the headers relating to the rate limit.
:rtype: dict</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">check_rate_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Makes a call to the site, checking if you have hit the rate limit.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#rate-limits</span>

<span class="sd">    :returns: the headers relating to the rate limit.</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">()</span>
    <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;X-Rate-Limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getsystem&quot;</span><span class="p">]</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span>
    <span class="p">)</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_rate_limit_header</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">retval</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.delete_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">,</span> <span class="n">time_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Deletes a given status, based on the provided parameters
needs a datetime() object
set the hours/minutes to non-zero to delete a specific time</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</p>
<p>:param date_val: The date to delete.
:type date_val: datetime.datetime.date</p>
<p>:param time_val: The time entry to delete.
:type time_val: datetime.datetime.time</p>
<p>:returns: The response object
:rtype: aiohttp.ClientResponse</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_status</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">date_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">time_val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Deletes a given status, based on the provided parameters</span>
<span class="sd">    needs a datetime() object</span>
<span class="sd">    set the hours/minutes to non-zero to delete a specific time</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#delete-status-service</span>

<span class="sd">    :param date_val: The date to delete.</span>
<span class="sd">    :type date_val: datetime.datetime.date</span>

<span class="sd">    :param time_val: The time entry to delete.</span>
<span class="sd">    :type time_val: datetime.datetime.time</span>

<span class="sd">    :returns: The response object</span>
<span class="sd">    :rtype: aiohttp.ClientResponse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;date_val&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="p">,</span>
            <span class="s2">&quot;time_val&quot;</span><span class="p">:</span> <span class="n">time_val</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">DELETESTATUS_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">date_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">time_val</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deletestatus&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.deregister_notification" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deregister_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>The Deregister Notification Service removes registered notifications under an application id for a system.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</p>
<p>All parameters are mandatory</p>
<p>:param appid: Application ID (eg: example.app.id)
:type appid: str (maxlen: 100)</p>
<p>:param alerttype: Alert Type (See list below)
:type alerttype: int</p>
<p>:return: The response object
:rtype: aiohttp.ClientResponse</p>
<p>Alert Type list:</p>
<p>=====   ====
Value   Type
=====   ====
0       All Notifications
1       Private Message
3       Joined Team
4       Added Favourite
5       High Consumption Alert
6       System Idle Alert
8       Low Generation Alert
11      Performance Alert
14      Standby Cost Alert
15      Extended Data V7 Alert
16      Extended Data V8 Alert
17      Extended Data V9 Alert
18      Extended Data V10 Alert
19      Extended Data V11 Alert
20      Extended Data V12 Alert
23      High Net Power Alert
24      Low Net Power Alert
=====   ====</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">deregister_notification</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Deregister Notification Service removes registered notifications under an application id for a system.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#deregister-notification-service</span>

<span class="sd">    All parameters are mandatory</span>

<span class="sd">    :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">    :type appid: str (maxlen: 100)</span>

<span class="sd">    :param alerttype: Alert Type (See list below)</span>
<span class="sd">    :type alerttype: int</span>

<span class="sd">    :return: The response object</span>
<span class="sd">    :rtype: aiohttp.ClientResponse</span>

<span class="sd">    Alert Type list:</span>

<span class="sd">    =====   ====</span>
<span class="sd">    Value   Type</span>
<span class="sd">    =====   ====</span>
<span class="sd">    0       All Notifications</span>
<span class="sd">    1       Private Message</span>
<span class="sd">    3       Joined Team</span>
<span class="sd">    4       Added Favourite</span>
<span class="sd">    5       High Consumption Alert</span>
<span class="sd">    6       System Idle Alert</span>
<span class="sd">    8       Low Generation Alert</span>
<span class="sd">    11      Performance Alert</span>
<span class="sd">    14      Standby Cost Alert</span>
<span class="sd">    15      Extended Data V7 Alert</span>
<span class="sd">    16      Extended Data V8 Alert</span>
<span class="sd">    17      Extended Data V9 Alert</span>
<span class="sd">    18      Extended Data V10 Alert</span>
<span class="sd">    19      Extended Data V11 Alert</span>
<span class="sd">    20      Extended Data V12 Alert</span>
<span class="sd">    23      High Net Power Alert</span>
<span class="sd">    24      Low Net Power Alert</span>
<span class="sd">    =====   ====</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
            <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">DELETE_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;deregisternotification&quot;</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">}</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.getstatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>The Get Status service retrieves system status information and live output data.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#get-status-service</p>
<p>:returns: the last updated data
:rtype: dict</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">getstatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Get Status service retrieves system status information and live output data.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#get-status-service</span>

<span class="sd">    :returns: the last updated data</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: extend this, you can do history searches and all sorts with this endpoint</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;ext&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">&quot;sid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemid</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;getstatus&quot;</span><span class="p">]</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="c1"># grab all the things</span>
    <span class="n">text</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">responsedata</span><span class="p">,</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">responsedata_to_response</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>

    <span class="c1"># if we&#39;re fancy, we get more data</span>
    <span class="k">if</span> <span class="n">extras</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="n">responsedata</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="kc">None</span> <span class="k">if</span> <span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">extras</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">responsedata</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.asyncio.PVOutput.register_notification" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_notification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>The Register Notification Service allows a third party application
to receive PVOutput alert callbacks via a HTTP end point.</p>
<p>API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</p>
<p>All parameters are mandatory</p>
<p>:param appid: Application ID (eg: example.app.id)
:type appid: str (maxlen: 100)</p>
<p>:param url: Callback URL (eg: http://example.com/api/)
:type url: str (maxlen: 150)</p>
<p>:param alerttype: Alert Type (See list below)
:type alerttype: int</p>
<p>:return: The response object
:rtype: aiohttp.ClientResponse</p>
<p>Alert Type list:</p>
<p>=====   ====
Value   Type
=====   ====
0       All Notifications
1       Private Message
3       Joined Team
4       Added Favourite
5       High Consumption Alert
6       System Idle Alert
8       Low Generation Alert
11      Performance Alert
14      Standby Cost Alert
15      Extended Data V7 Alert
16      Extended Data V8 Alert
17      Extended Data V9 Alert
18      Extended Data V10 Alert
19      Extended Data V11 Alert
20      Extended Data V12 Alert
23      High Net Power Alert
24      Low Net Power Alert
=====   ====</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/asyncio/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">register_notification</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">appid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alerttype</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientResponse</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The Register Notification Service allows a third party application</span>
<span class="sd">    to receive PVOutput alert callbacks via a HTTP end point.</span>

<span class="sd">    API spec: https://pvoutput.org/help/api_specification.html#register-notification-service</span>

<span class="sd">    All parameters are mandatory</span>

<span class="sd">    :param appid: Application ID (eg: example.app.id)</span>
<span class="sd">    :type appid: str (maxlen: 100)</span>

<span class="sd">    :param url: Callback URL (eg: http://example.com/api/)</span>
<span class="sd">    :type url: str (maxlen: 150)</span>

<span class="sd">    :param alerttype: Alert Type (See list below)</span>
<span class="sd">    :type alerttype: int</span>

<span class="sd">    :return: The response object</span>
<span class="sd">    :rtype: aiohttp.ClientResponse</span>

<span class="sd">    Alert Type list:</span>

<span class="sd">    =====   ====</span>
<span class="sd">    Value   Type</span>
<span class="sd">    =====   ====</span>
<span class="sd">    0       All Notifications</span>
<span class="sd">    1       Private Message</span>
<span class="sd">    3       Joined Team</span>
<span class="sd">    4       Added Favourite</span>
<span class="sd">    5       High Consumption Alert</span>
<span class="sd">    6       System Idle Alert</span>
<span class="sd">    8       Low Generation Alert</span>
<span class="sd">    11      Performance Alert</span>
<span class="sd">    14      Standby Cost Alert</span>
<span class="sd">    15      Extended Data V7 Alert</span>
<span class="sd">    16      Extended Data V8 Alert</span>
<span class="sd">    17      Extended Data V9 Alert</span>
<span class="sd">    18      Extended Data V10 Alert</span>
<span class="sd">    19      Extended Data V11 Alert</span>
<span class="sd">    20      Extended Data V12 Alert</span>
<span class="sd">    23      High Net Power Alert</span>
<span class="sd">    24      Low Net Power Alert</span>
<span class="sd">    =====   ====</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">validate_data</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;alerttype&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">REGISTER_NOTIFICATION_PARAMETERS</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">call_url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">URLS</span><span class="p">[</span><span class="s2">&quot;registernotification&quot;</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">alerttype</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="n">call_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="pvoutput.base" class="doc doc-heading">
        <code>base</code>



</h2>

    <div class="doc doc-contents ">

      <p>base class for pvoutput </p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="pvoutput.base.PVOutputBase" class="doc doc-heading">
        <code>
PVOutputBase        </code>



</h3>

    <div class="doc doc-contents ">

      <p>base class for the PVOutput API</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PVOutputBase</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;base class for the PVOutput API&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">apikey</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">systemid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">donation_made</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">stats_period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">systemid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;systemid should be int&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">apikey</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;apikey should be str&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span> <span class="o">=</span> <span class="n">apikey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">systemid</span> <span class="o">=</span> <span class="n">systemid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span> <span class="o">=</span> <span class="n">donation_made</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats_period</span> <span class="o">=</span> <span class="n">stats_period</span>

    <span class="k">def</span> <span class="nf">_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Relevant documentation: https://pvoutput.org/help/api_specification.html#http-headers</span>

<span class="sd">        :return: headers for calls to the API</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;X-Pvoutput-Apikey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span><span class="p">,</span>
            <span class="s2">&quot;X-Pvoutput-SystemId&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemid</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">headers</span>

    <span class="k">def</span> <span class="nf">get_time_by_base</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;rounds the current time to the base specified (ie, to 15 minutes or 5 minutes etc)&quot;&quot;&quot;</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H&quot;</span><span class="p">))</span>
        <span class="c1"># round the minute to the current stats period</span>
        <span class="n">minute</span> <span class="o">=</span> <span class="n">round_to_base</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stats_period</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">time</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">minute</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_validate_format</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">format_string</span><span class="p">:</span> <span class="n">AnyStr</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;handles the regular expression format checks&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">compiled</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">format_string</span><span class="p">)</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">compiled</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;key &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;, with value &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; does not match &#39;</span><span class="si">{</span><span class="n">format_string</span><span class="si">!r}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="n">re</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidRegexpError</span><span class="p">(</span>
                <span class="s2">&quot;Error for key &#39;</span><span class="si">{key}</span><span class="s2">&#39; with format &#39;</span><span class="si">{format_string!r}</span><span class="s2">&#39;: </span><span class="si">{error}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">error</span>

    <span class="c1"># pylint: disable=too-many-branches</span>
    <span class="k">def</span> <span class="nf">validate_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">apiset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does a super-simple validation based on the api def raises errors if it&#39;s wrong, returns True if it&#39;s OK</span>

<span class="sd">        This&#39;ll only raise an error on the first error it finds</span>

<span class="sd">        :param data: the data to validate.</span>
<span class="sd">        :type data: dict</span>

<span class="sd">        :param apiset: A set of validation rules, eg: pvoutput.ADDSTATUS_PARAMETERS</span>
<span class="sd">        :type apiset: dict</span>

<span class="sd">        :raises TypeError: if the type testing fails.</span>
<span class="sd">        :raises ValueError: if you&#39;re trying to pass an invalid value.</span>
<span class="sd">        :raises pvoutput.InvalidRegexpError: if value does not match the regexp in format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if you set a &#39;required_oneof&#39; key in apiset, validation will require at least one of those keys to be set</span>
        <span class="k">if</span> <span class="s2">&quot;required_oneof&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="s2">&quot;required_oneof&quot;</span><span class="p">][</span><span class="s2">&quot;keys&quot;</span><span class="p">]])</span>
            <span class="o">==</span> <span class="mi">0</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;one of </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="s1">&#39;required_oneof&#39;</span><span class="p">][</span><span class="s1">&#39;keys&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> MUST be set&quot;</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1"># check that that required values are set</span>
            <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                    <span class="c1"># set a default value</span>
                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> required in data&quot;</span><span class="p">)</span>

            <span class="c1"># check maxlen</span>
            <span class="k">if</span> <span class="s2">&quot;maxlen&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;maxlen&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Value too long for key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;maxlen&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

            <span class="c1"># check the value is in the set of valid choices</span>
            <span class="k">if</span> <span class="s2">&quot;choices&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;choices&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid value for key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: &#39;</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;, should be in </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;choices&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="p">)</span>

        <span class="c1"># check there&#39;s no extra fields in the data</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> isn&#39;t valid in the API spec&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;data[</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">] type (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span><span class="si">}</span><span class="s2"> is invalid - should be </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span>
                    <span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_format</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;format&quot;</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="c1"># can run additional functions over the data</span>
            <span class="k">if</span> <span class="s2">&quot;additional_validators&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">validator</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;additional_validators&quot;</span><span class="p">]:</span>
                    <span class="n">validator</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

            <span class="c1"># TODO: &#39;d&#39; can&#39;t be more than 14 days ago, if a donator, goes out to 90</span>
            <span class="c1"># check if donation_made == True and age of thing</span>
            <span class="c1"># if self.donation_made:</span>
            <span class="c1">#     # check if more than 90 days ago</span>
            <span class="c1"># else:</span>
            <span class="c1">#     # check if more than 14 days ago</span>

            <span class="c1"># check for donation-only keys</span>
            <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;donation_required&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DonationRequired</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> requires an account which has donated&quot;</span>
                <span class="p">)</span>
            <span class="c1"># check if you&#39;re outside max/min values</span>
            <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxval&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxval&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> cannot be higher than </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;maxval&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, is </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minval&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minval&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> cannot be lower than </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;minval&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, is </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="pvoutput.base.PVOutputBase.get_time_by_base" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_time_by_base</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>rounds the current time to the base specified (ie, to 15 minutes or 5 minutes etc)</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_time_by_base</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;rounds the current time to the base specified (ie, to 15 minutes or 5 minutes etc)&quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H&quot;</span><span class="p">))</span>
    <span class="c1"># round the minute to the current stats period</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="n">round_to_base</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stats_period</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">time</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">minute</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="pvoutput.base.PVOutputBase.validate_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">apiset</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Does a super-simple validation based on the api def raises errors if it's wrong, returns True if it's OK</p>
<p>This'll only raise an error on the first error it finds</p>
<p>:param data: the data to validate.
:type data: dict</p>
<p>:param apiset: A set of validation rules, eg: pvoutput.ADDSTATUS_PARAMETERS
:type apiset: dict</p>
<p>:raises TypeError: if the type testing fails.
:raises ValueError: if you're trying to pass an invalid value.
:raises pvoutput.InvalidRegexpError: if value does not match the regexp in format.</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">apiset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Does a super-simple validation based on the api def raises errors if it&#39;s wrong, returns True if it&#39;s OK</span>

<span class="sd">    This&#39;ll only raise an error on the first error it finds</span>

<span class="sd">    :param data: the data to validate.</span>
<span class="sd">    :type data: dict</span>

<span class="sd">    :param apiset: A set of validation rules, eg: pvoutput.ADDSTATUS_PARAMETERS</span>
<span class="sd">    :type apiset: dict</span>

<span class="sd">    :raises TypeError: if the type testing fails.</span>
<span class="sd">    :raises ValueError: if you&#39;re trying to pass an invalid value.</span>
<span class="sd">    :raises pvoutput.InvalidRegexpError: if value does not match the regexp in format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if you set a &#39;required_oneof&#39; key in apiset, validation will require at least one of those keys to be set</span>
    <span class="k">if</span> <span class="s2">&quot;required_oneof&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="s2">&quot;required_oneof&quot;</span><span class="p">][</span><span class="s2">&quot;keys&quot;</span><span class="p">]])</span>
        <span class="o">==</span> <span class="mi">0</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;one of </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="s1">&#39;required_oneof&#39;</span><span class="p">][</span><span class="s1">&#39;keys&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> MUST be set&quot;</span>
        <span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="c1"># check that that required values are set</span>
        <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="c1"># set a default value</span>
                <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> required in data&quot;</span><span class="p">)</span>

        <span class="c1"># check maxlen</span>
        <span class="k">if</span> <span class="s2">&quot;maxlen&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;maxlen&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value too long for key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;maxlen&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># check the value is in the set of valid choices</span>
        <span class="k">if</span> <span class="s2">&quot;choices&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;choices&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid value for key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: &#39;</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;, should be in </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;choices&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="p">)</span>

    <span class="c1"># check there&#39;s no extra fields in the data</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">apiset</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> isn&#39;t valid in the API spec&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;data[</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">] type (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span><span class="si">}</span><span class="s2"> is invalid - should be </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_format</span><span class="p">(</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;format&quot;</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="c1"># can run additional functions over the data</span>
        <span class="k">if</span> <span class="s2">&quot;additional_validators&quot;</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">validator</span> <span class="ow">in</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;additional_validators&quot;</span><span class="p">]:</span>
                <span class="n">validator</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="c1"># TODO: &#39;d&#39; can&#39;t be more than 14 days ago, if a donator, goes out to 90</span>
        <span class="c1"># check if donation_made == True and age of thing</span>
        <span class="c1"># if self.donation_made:</span>
        <span class="c1">#     # check if more than 90 days ago</span>
        <span class="c1"># else:</span>
        <span class="c1">#     # check if more than 14 days ago</span>

        <span class="c1"># check for donation-only keys</span>
        <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;donation_required&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">donation_made</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DonationRequired</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> requires an account which has donated&quot;</span>
            <span class="p">)</span>
        <span class="c1"># check if you&#39;re outside max/min values</span>
        <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxval&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;maxval&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> cannot be higher than </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;maxval&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, is </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minval&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minval&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> cannot be lower than </span><span class="si">{</span><span class="n">apiset</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;minval&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, is </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="pvoutput.base.round_to_base" class="doc doc-heading">
<code class="highlight language-python"><span class="n">round_to_base</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>rounds down to a specific base number
based on answer in https://stackoverflow.com/a/2272174/188774</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">round_to_base</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;rounds down to a specific base number</span>
<span class="sd">    based on answer in https://stackoverflow.com/a/2272174/188774</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">base</span> <span class="o">*</span> <span class="nb">round</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">number</span> <span class="o">/</span> <span class="n">base</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="pvoutput.exceptions" class="doc doc-heading">
        <code>exceptions</code>



</h2>

    <div class="doc doc-contents ">

      <p>Custom exceptions. </p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="pvoutput.exceptions.DonationRequired" class="doc doc-heading">
        <code>
DonationRequired            (<span title="Exception">Exception</span>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>A custom exception for when you call a method that requires a donation-enabled account</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/exceptions.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DonationRequired</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A custom exception for when you call a method that requires a donation-enabled account&quot;&quot;&quot;</span>
</code></pre></div>
        </details>


    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="pvoutput.exceptions.InvalidRegexpError" class="doc doc-heading">
        <code>
InvalidRegexpError            (<span title="Exception">Exception</span>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>There was an error with the regexp format for this key</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/exceptions.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">InvalidRegexpError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;There was an error with the regexp format for this key&quot;&quot;&quot;</span>
</code></pre></div>
        </details>


    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="pvoutput.exceptions.UnknownAlertTypeError" class="doc doc-heading">
        <code>
UnknownAlertTypeError            (<span title="Exception">Exception</span>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>The provided Alert Type is not supported</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/exceptions.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">UnknownAlertTypeError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The provided Alert Type is not supported&quot;&quot;&quot;</span>
</code></pre></div>
        </details>


    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="pvoutput.exceptions.UnknownMethodError" class="doc doc-heading">
        <code>
UnknownMethodError            (<span title="Exception">Exception</span>)
        </code>



</h3>

    <div class="doc doc-contents ">

      <p>The method is unknown.</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/exceptions.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">UnknownMethodError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The method is unknown.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>


    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="pvoutput.parameters" class="doc doc-heading">
        <code>parameters</code>



</h2>

    <div class="doc doc-contents ">

      <p>Standard parameter things. </p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h3 id="pvoutput.parameters.ADDSTATUS_PARAMETERS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ADDSTATUS_PARAMETERS</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Cumulative Energy
The following values are valid for the c1 flag.
    1 Both v1 and v3 values are lifetime energy values. Consumption and generation energy is reset to 0 at the start of the day.
    2 Only v1 generation is a lifetime energy value.
    3 Only v3 consumption is a lifetime energy value.</p>
    </div>

  </div>














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="pvoutput.utils" class="doc doc-heading">
        <code>utils</code>



</h2>

    <div class="doc doc-contents ">

      <p>Utilities </p>



  <div class="doc doc-children">












  <div class="doc doc-object doc-function">



<h3 id="pvoutput.utils.get_rate_limit_header" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_rate_limit_header</span><span class="p">(</span><span class="n">response_object</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>gets the rate limit header from the returned headers</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_rate_limit_header</span><span class="p">(</span><span class="n">response_object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;gets the rate limit header from the returned headers&quot;&quot;&quot;</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">response_object</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;X-Rate-Limit&quot;</span><span class="p">):</span>
            <span class="n">retval</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">response_object</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">retval</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="pvoutput.utils.responsedata_to_response" class="doc doc-heading">
<code class="highlight language-python"><span class="n">responsedata_to_response</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Turns the status output into a dict</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">responsedata_to_response</span><span class="p">(</span><span class="n">input_data</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turns the status output into a dict&quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">d</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v5</span><span class="p">,</span> <span class="n">v6</span><span class="p">,</span> <span class="n">normalised_output</span><span class="p">,</span> <span class="o">*</span><span class="n">extras</span> <span class="o">=</span> <span class="n">input_data</span>

    <span class="c1"># if there&#39;s no data, you get &quot;NaN&quot;. Here we change that to NoneType</span>
    <span class="n">responsedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span>
        <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2"> %H:%M&quot;</span><span class="p">),</span>
        <span class="s2">&quot;v1&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v1</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span>
        <span class="s2">&quot;v2&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v2</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v2</span><span class="p">),</span>
        <span class="s2">&quot;v3&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v3</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v3</span><span class="p">),</span>
        <span class="s2">&quot;v4&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v4</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v4</span><span class="p">),</span>
        <span class="s2">&quot;v5&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v5</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v5</span><span class="p">),</span>
        <span class="s2">&quot;v6&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">v6</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v6</span><span class="p">),</span>
        <span class="s2">&quot;normalised_output&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">normalised_output</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">responsedata</span><span class="p">,</span> <span class="n">extras</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="pvoutput.utils.validate_delete_status_date" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_delete_status_date</span><span class="p">(</span><span class="n">date_val</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>runs the validation for the date_val option of delete_status</p>

        <details class="quote">
          <summary>Source code in <code>pvoutput/utils.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate_delete_status_date</span><span class="p">(</span><span class="n">date_val</span><span class="p">:</span> <span class="n">date</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;runs the validation for the date_val option of delete_status&quot;&quot;&quot;</span>
    <span class="n">yesterday</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">tomorrow</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># you can&#39;t delete back past yesterday</span>
    <span class="k">if</span> <span class="n">date_val</span> <span class="o">&lt;</span> <span class="n">yesterday</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;date_val can only be yesterday or today, you provided </span><span class="si">{</span><span class="n">date_val</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="c1"># you can&#39;t delete forward of today</span>
    <span class="k">if</span> <span class="n">date_val</span> <span class="o">&gt;=</span> <span class="n">tomorrow</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;date_val can only be yesterday or today, you provided </span><span class="si">{</span><span class="n">date_val</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.960e086b.min.js"></script>
      
    
  </body>
</html>